{"version":3,"sources":["../../src/utils/webpack.config.js"],"names":["require","store","debug","WebpackMD5Hash","ChunkManifestPlugin","GatsbyModulePlugin","genBabelConfig","withBasePath","HashedChunkIdsPlugin","module","exports","program","directory","suppliedStage","webpackPort","pages","processEnv","getHmrPath","output","entry","plugins","resolve","devtool","resolveLoader","root","path","userLoaderDirectoryPath","fs","statSync","isDirectory","push","e","code","console","log","modulesDirectories","join","__dirname","config","loader","test","exclude","query","babelConfig","loaders","name","limit","stage","merge","postcss","wp","addDependencyTo","browsers","browserslist","extract","getState","extensions","directoryPath","webpack","optimize","OccurenceOrderPlugin","HotModuleReplacementPlugin","NoErrorsPlugin","DefinePlugin","__PREFIX_PATHS__","prefixPaths","__PATH_PREFIX__","JSON","stringify","pathPrefix","__POLYFILL__","polyfill","NamedModulesPlugin","FriendlyErrorsWebpackPlugin","clearConsole","StaticSiteGeneratorPlugin","paths","components","map","page","componentChunkName","IgnorePlugin","CommonsChunkPlugin","chunks","minChunks","count","vendorModuleList","isFramework","regex","RegExp","vendor","resource","StatsWriterPlugin","filename","manifestVariable","noUglify","UglifyJsPlugin","compress","screw_ie8","warnings","mangle","comments","Error","commons","main","app","publicPath","process","env","GATSBY_WEBPACK_PUBLICPATH","ssl","host","devtoolModuleFilenameTemplate","info","absoluteResourcePath","replace","libraryTarget","chunkFilename","hmrBasePath","hmrSuffix","pubPath","substr","defaultNodeEnv","NODE_ENV","envFile","cwd","parsed","dotenv","parse","readFileSync","encoding","envObject","Object","keys","reduce","acc","key","gatsbyVarObject","match","PUBLIC_DIR","assign","Config","context","node","__filename","target","profile","validatedConfig"],"mappings":"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","file":"webpack.config.js","sourcesContent":["require(`v8-compile-cache`)\n\nimport { uniq, some } from \"lodash\"\nimport fs from \"fs\"\nimport path from \"path\"\nimport webpack from \"webpack\"\nimport dotenv from \"dotenv\"\nimport Config from \"webpack-configurator\"\nimport StaticSiteGeneratorPlugin from \"static-site-generator-webpack-plugin\"\nimport { StatsWriterPlugin } from \"webpack-stats-plugin\"\nimport FriendlyErrorsWebpackPlugin from \"friendly-errors-webpack-plugin\"\nimport { cssModulesConfig } from \"gatsby-1-config-css-modules\"\nimport { extractTextPlugin } from \"gatsby-1-config-extract-plugin\"\n\n// This isn't working right it seems.\n// import WebpackStableModuleIdAndHash from 'webpack-stable-module-id-and-hash'\nimport webpackModifyValidate from \"./webpack-modify-validate\"\n\nconst { store } = require(`../redux`)\nconst debug = require(`debug`)(`gatsby:webpack-config`)\nconst WebpackMD5Hash = require(`webpack-md5-hash`)\nconst ChunkManifestPlugin = require(`chunk-manifest-webpack-plugin`)\nconst GatsbyModulePlugin = require(`gatsby-module-loader/plugin`)\nconst genBabelConfig = require(`./babel-config`)\nconst { withBasePath } = require(`./path`)\nconst HashedChunkIdsPlugin = require(`./hashed-chunk-ids-plugin`)\n\n// Five stages or modes:\n//   1) develop: for `gatsby develop` command, hot reload and CSS injection into page\n//   2) develop-html: same as develop without react-hmre in the babel config for html renderer\n//   3) build-css: build styles.css file\n//   4) build-html: build all HTML files\n//   5) build-javascript: Build js chunks for Single Page App in production\n\nmodule.exports = async (\n  program,\n  directory,\n  suppliedStage,\n  webpackPort = 1500,\n  pages = []\n) => {\n  const directoryPath = withBasePath(directory)\n\n  // We combine develop & develop-html stages for purposes of generating the\n  // webpack config.\n  const stage = suppliedStage\n  const babelConfig = await genBabelConfig(program, suppliedStage)\n  const { noUglify } = program\n\n  function processEnv(stage, defaultNodeEnv) {\n    debug(`Building env for \"${stage}\"`)\n    const env = process.env.NODE_ENV\n      ? process.env.NODE_ENV\n      : `${defaultNodeEnv}`\n    const envFile = path.join(process.cwd(), `./.env.${env}`)\n    let parsed = {}\n    try {\n      parsed = dotenv.parse(fs.readFileSync(envFile, { encoding: `utf8` }))\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n    const envObject = Object.keys(parsed).reduce((acc, key) => {\n      acc[key] = JSON.stringify(parsed[key])\n      return acc\n    }, {})\n\n    const gatsbyVarObject = Object.keys(process.env).reduce((acc, key) => {\n      if (key.match(/^GATSBY_/)) {\n        acc[key] = JSON.stringify(process.env[key])\n      }\n      return acc\n    }, {})\n\n    // Don't allow overwriting of NODE_ENV, PUBLIC_DIR as to not break gatsby things\n    envObject.NODE_ENV = JSON.stringify(env)\n    envObject.PUBLIC_DIR = JSON.stringify(`${process.cwd()}/public`)\n\n    return Object.assign(envObject, gatsbyVarObject)\n  }\n\n  function getHmrPath() {\n    let hmrBasePath = `${program.ssl ? `https` : `http`}://${\n      program.host\n    }:${webpackPort}/`\n\n    const hmrSuffix = `__webpack_hmr&reload=true&overlay=false`\n\n    if (process.env.GATSBY_WEBPACK_PUBLICPATH) {\n      const pubPath = process.env.GATSBY_WEBPACK_PUBLICPATH\n      if (pubPath.substr(-1) === `/`) {\n        hmrBasePath = pubPath\n      } else {\n        hmrBasePath = `${pubPath}/`\n      }\n    }\n\n    return hmrBasePath + hmrSuffix\n  }\n\n  debug(`Loading webpack config for stage \"${stage}\"`)\n  function output() {\n    switch (stage) {\n      case `develop`:\n        return {\n          path: directory,\n          filename: `[name].js`,\n          publicPath:\n            process.env.GATSBY_WEBPACK_PUBLICPATH ||\n            `${program.ssl ? `https` : `http`}://${\n              program.host\n            }:${webpackPort}/`,\n          devtoolModuleFilenameTemplate: info =>\n            path.resolve(info.absoluteResourcePath).replace(/\\\\/g, `/`),\n        }\n      case `build-css`:\n        // Webpack will always generate a resultant javascript file.\n        // But we don't want it for this step. Deleted by build-css.js.\n        return {\n          path: directoryPath(`public`),\n          filename: `bundle-for-css.js`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-html`:\n      case `develop-html`:\n        // A temp file required by static-site-generator-plugin. See plugins() below.\n        // Deleted by build-html.js, since it's not needed for production.\n        return {\n          path: directoryPath(`public`),\n          filename: `render-page.js`,\n          libraryTarget: `umd`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-javascript`:\n        return {\n          filename: `[name]-[chunkhash].js`,\n          chunkFilename: `[name]-[chunkhash].js`,\n          path: directoryPath(`public`),\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function entry() {\n    switch (stage) {\n      case `develop`:\n        return {\n          commons: [\n            require.resolve(`react-hot-loader/patch`),\n            `${require.resolve(\n              `webpack-hot-middleware/client`\n            )}?path=${getHmrPath()}`,\n            directoryPath(`.cache/app`),\n          ],\n        }\n      case `develop-html`:\n        return {\n          main: directoryPath(`.cache/develop-static-entry`),\n        }\n      case `build-css`:\n        return {\n          main: directoryPath(`.cache/app`),\n        }\n      case `build-html`:\n        return {\n          main: directoryPath(`.cache/static-entry`),\n        }\n      case `build-javascript`:\n        return {\n          app: directoryPath(`.cache/production-app`),\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function plugins() {\n    switch (stage) {\n      case `develop`:\n        return [\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new webpack.HotModuleReplacementPlugin(),\n          new webpack.NoErrorsPlugin(),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Names module ids with their filepath. We use this in development\n          // to make it easier to see what modules have hot reloaded, etc. as\n          // the numerical IDs aren't useful. In production we use numerical module\n          // ids to reduce filesize.\n          new webpack.NamedModulesPlugin(),\n          new FriendlyErrorsWebpackPlugin({\n            clearConsole: false,\n            // compilationSuccessInfo: {\n            // messages: [\n            // `You can now view your site in the browser running at http://${program.host}:${program.port}`,\n            // `Your graphql debugger is running at http://${program.host}:${program.port}/___graphql`,\n            // ],\n            // },\n          }),\n        ]\n      case `develop-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          extractTextPlugin(stage),\n        ]\n      case `build-css`:\n        return [\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          extractTextPlugin(stage),\n        ]\n      case `build-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          extractTextPlugin(stage),\n        ]\n      case `build-javascript`: {\n        // Get array of page template component names.\n        let components = store\n          .getState()\n          .pages.map(page => page.componentChunkName)\n        components = uniq(components)\n        const plugins = [\n          // Moment.js includes 100s of KBs of extra localization data by\n          // default in Webpack that most sites don't want. This line disables\n          // loading locale modules. This is a practical solution that requires\n          // the user to opt into importing specific locales.\n          // https://github.com/jmblog/how-to-optimize-momentjs-with-webpack\n          new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/),\n          new WebpackMD5Hash(),\n          // new webpack.optimize.DedupePlugin(),\n          // Extract \"commons\" chunk from the app entry and all\n          // page components.\n          new webpack.optimize.CommonsChunkPlugin({\n            name: `commons`,\n            chunks: [`app`, ...components],\n            // The more page components there are, the higher we raise the bar\n            // for merging in page-specific JS libs into the commons chunk. The\n            // two principles here is a) keep the TTI (time to interaction) as\n            // low as possible so that means keeping commons.js small with\n            // critical framework code (e.g. React/react-router) and b) is we\n            // want to push JS parse/eval work as close as possible to when\n            // it's used. Since most people don't navigate to most pages, take\n            // tradeoff of loading/evaling modules multiple times over\n            // loading/evaling lots of unused code on the initial opening of\n            // the app.\n            minChunks: (module, count) => {\n              const vendorModuleList = [\n                `react`,\n                `react-dom`,\n                `fbjs`,\n                `react-router`,\n                `react-router-dom`,\n                `gatsby-react-router-scroll`,\n                `dom-helpers`, // Used in gatsby-react-router-scroll\n                `path-to-regexp`,\n                `isarray`, // Used by path-to-regexp.\n                `scroll-behavior`,\n                `history`,\n                `resolve-pathname`, // Used by history.\n                `value-equal`, // Used by history.\n                `invariant`, // Used by history.\n                `warning`, // Used by history.\n                `babel-runtime`, // Used by history.\n                `core-js`, // Used by history.\n                `loose-envify`, // Used by history.\n                `prop-types`,\n                `gatsby-link`,\n              ]\n              const isFramework = some(\n                vendorModuleList.map(vendor => {\n                  const regex = new RegExp(\n                    `[\\\\\\\\/]node_modules[\\\\\\\\/]${vendor}[\\\\\\\\/].*`,\n                    `i`\n                  )\n                  return regex.test(module.resource)\n                })\n              )\n              return isFramework || count > 3\n            },\n          }),\n          // Add a few global variables. Set NODE_ENV to production (enables\n          // optimizations for React) and whether prefixing links is enabled\n          // (__PREFIX_PATHS__) and what the link prefix is (__PATH_PREFIX__).\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Extract CSS so it doesn't get added to JS bundles.\n          extractTextPlugin(stage),\n          // Write out mapping between chunk names and their hashed names. We use\n          // this to add the needed javascript files to each HTML page.\n          new StatsWriterPlugin(),\n          // Extract the webpack chunk manifest out of commons.js so commons.js\n          // doesn't get changed everytime you build. This increases the cache-hit\n          // rate for commons.js.\n          new ChunkManifestPlugin({\n            filename: `chunk-manifest.json`,\n            manifestVariable: `webpackManifest`,\n          }),\n          // Ensure module order stays the same. Supposibly fixed in webpack 2.0.\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new GatsbyModulePlugin(),\n          // new WebpackStableModuleIdAndHash({ seed: 9, hashSize: 47 }),\n          new HashedChunkIdsPlugin(),\n        ]\n        if (!noUglify) {\n          // Minify JavaScript.\n          plugins.push(\n            new webpack.optimize.UglifyJsPlugin({\n              compress: {\n                screw_ie8: true, // React doesn't support IE8\n                warnings: false,\n              },\n              mangle: {\n                screw_ie8: true,\n              },\n              output: {\n                comments: false,\n                screw_ie8: true,\n              },\n            })\n          )\n        }\n        return plugins\n      }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function resolve() {\n    const { program } = store.getState()\n    return {\n      // Use the program's extension list (generated via the\n      // 'resolvableExtensions' API hook).\n      extensions: [``, ...program.extensions],\n      // Default to using the site's node_modules directory to look for\n      // modules. But also make it possible to install modules within the src\n      // directory if you need to install a specific version of a module for a\n      // part of your site.\n      modulesDirectories: [\n        `node_modules`,\n        directoryPath(`node_modules`),\n        directoryPath(`node_modules`, `gatsby`, `node_modules`),\n      ],\n    }\n  }\n\n  function devtool() {\n    switch (stage) {\n      case `develop`:\n        return `cheap-module-source-map`\n      // use a normal `source-map` for the html phases since\n      // it gives better line and column numbers\n      case `develop-html`:\n      case `build-html`:\n      case `build-javascript`:\n        return `source-map`\n      default:\n        return false\n    }\n  }\n\n  function module(config) {\n    // Common config for every env.\n    config.loader(`js`, {\n      test: /\\.jsx?$/, // Accept either .js or .jsx files.\n      exclude: /(node_modules|bower_components)/,\n      loader: `babel`,\n      query: babelConfig,\n    })\n    config.loader(`json`, {\n      test: /\\.json$/,\n      loaders: [`json`],\n    })\n    config.loader(`yaml`, {\n      test: /\\.ya?ml/,\n      loaders: [`json`, `yaml`],\n    })\n\n    // \"file\" loader makes sure those assets end up in the `public` folder.\n    // When you `import` an asset, you get its filename.\n    config.loader(`file-loader`, {\n      test: /\\.(ico|eot|otf|webp|pdf|ttf|woff(2)?)(\\?.*)?$/,\n      loader: `file`,\n      query: {\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n    // \"url\" loader works just like \"file\" loader but it also embeds\n    // assets smaller than specified size as data URLs to avoid requests.\n    config.loader(`url-loader`, {\n      test: /\\.(svg|jpg|jpeg|png|gif|mp4|webm|wav|mp3|m4a|aac|oga)(\\?.*)?$/,\n      loader: `url`,\n      query: {\n        limit: 10000,\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n\n    switch (stage) {\n      case `develop`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loaders: [`style`, `css`, `postcss`],\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loaders: [`style`, cssModulesConfig(stage), `postcss`],\n        })\n\n        config.merge({\n          postcss(wp) {\n            return [\n              require(`postcss-import`)({ addDependencyTo: wp }),\n              require(`postcss-cssnext`)({ browsers: program.browserslist }),\n              require(`postcss-browser-reporter`),\n              require(`postcss-reporter`),\n            ]\n          },\n        })\n        return config\n\n      case `build-css`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loader: extractTextPlugin(stage).extract([`css?minimize`, `postcss`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: extractTextPlugin(stage).extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n        config.merge({\n          postcss: [\n            require(`postcss-import`)(),\n            require(`postcss-cssnext`)({\n              browsers: program.browserslist,\n            }),\n          ],\n        })\n        return config\n\n      case `build-html`:\n      case `develop-html`:\n        // We don't deal with CSS at all when building the HTML.\n        // The 'null' loader is used to prevent 'module not found' errors.\n        // On the other hand CSS modules loaders are necessary.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loader: `null`,\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: extractTextPlugin(stage).extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      case `build-javascript`:\n        // we don't deal with css at all when building the javascript.  but\n        // still need to process the css so offline-plugin knows about the\n        // various assets referenced in your css.\n        //\n        // It's also necessary to process CSS Modules so your JS knows the\n        // classNames to use.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          // loader: `null`,\n          loader: extractTextPlugin(stage).extract([`css`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: extractTextPlugin(stage).extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      default:\n        return config\n    }\n  }\n\n  function resolveLoader() {\n    const root = [path.resolve(directory, `node_modules`)]\n\n    const userLoaderDirectoryPath = path.resolve(directory, `loaders`)\n\n    try {\n      if (fs.statSync(userLoaderDirectoryPath).isDirectory()) {\n        root.push(userLoaderDirectoryPath)\n      }\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n\n    return {\n      root,\n      modulesDirectories: [path.join(__dirname, `../loaders`), `node_modules`],\n    }\n  }\n\n  const config = new Config()\n\n  config.merge({\n    // Context is the base directory for resolving the entry option.\n    context: directory,\n    node: {\n      __filename: true,\n    },\n    entry: entry(),\n    debug: true,\n    // Certain \"isomorphic\" packages have different entry points for browser\n    // and server (see\n    // https://github.com/defunctzombie/package-browser-field-spec); setting\n    // the target tells webpack which file to include, ie. browser vs main.\n    target: stage === `build-html` || stage === `develop-html` ? `node` : `web`,\n    profile: stage === `production`,\n    devtool: devtool(),\n    output: output(),\n    resolveLoader: resolveLoader(),\n    plugins: plugins(),\n    resolve: resolve(),\n  })\n\n  module(config, stage)\n\n  // Use the suppliedStage again to let plugins distinguish between\n  // server rendering the html.js and the frontend development config.\n  const validatedConfig = await webpackModifyValidate(\n    program,\n    config,\n    babelConfig,\n    suppliedStage\n  )\n\n  return validatedConfig\n}\n"]}