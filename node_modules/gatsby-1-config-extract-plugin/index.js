"use strict";

var _extractTextWebpackPlugin = require("extract-text-webpack-plugin");

var _extractTextWebpackPlugin2 = _interopRequireDefault(_extractTextWebpackPlugin);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var extractDevelopHtml = new _extractTextWebpackPlugin2.default(extractTextFilename(`develop-html`));
var extractBuildHtml = new _extractTextWebpackPlugin2.default(extractTextFilename(`build-html`), {
  allChunks: true
});
var extractBuildCss = new _extractTextWebpackPlugin2.default(extractTextFilename(`build-css`), { allChunks: true });
var extractBuildJavascript = new _extractTextWebpackPlugin2.default(extractTextFilename(`build-javascript`), {
  allChunks: true
});

var errorMsg = `
gatsby-1-config-extract-plugin:
  stage must be one of: "develop-html", "build-html", "build-css", "build-javascript".
  Note that the "develop" stage does not use extract-text-webpack-plugin.
`;

function extractTextFilename(stage) {
  switch (stage) {
    case `develop-html`:
    case `build-html`:
      return `build-html-styles.css`;
    case `build-css`:
      return `styles.css`;
    case `build-javascript`:
      return `build-js-styles.css`;
    default:
      throw Error(errorMsg);
  }
}

function extractTextPlugin(stage) {
  switch (stage) {
    case `develop-html`:
      return extractDevelopHtml;
    case `build-html`:
      return extractBuildHtml;
    case `build-css`:
      return extractBuildCss;
    case `build-javascript`:
      return extractBuildJavascript;
    default:
      throw Error(errorMsg);
  }
}

exports.extractTextPlugin = extractTextPlugin;
exports.extractTextFilename = extractTextFilename;