{"data":{"markdownRemark":{"html":"<p>我们为刚开始涉猎IPFS的同学们准备了一些简单的例子，下面的列表后续会逐渐增加。这些例子通过ipfs托管的渲染器进行查看。</p>\n<ul>\n<li>有向无环图(Dags, Direct Acyclic Graph)、对象(objects)和区块(blocks)</li>\n<li>集群(Be the swarm)</li>\n<li>固定(Pinning)</li>\n<li>启动自己的ipfs</li>\n<li>简单的ipfs快照</li>\n<li>星际命名系统</li>\n<li>修改bootstrap peers列表</li>\n<li>配置自己的节点</li>\n<li>增加和播放视频</li>\n<li>通过图像展示对象</li>\n<li>让Git更加分布式</li>\n<li>使用IPFS托管网站</li>\n</ul>\n<hr>\n<h2 id=\"有向无环图dags-direct-acyclic-graph、对象objects和区块blocks\"><a href=\"#%E6%9C%89%E5%90%91%E6%97%A0%E7%8E%AF%E5%9B%BEdags-direct-acyclic-graph%E3%80%81%E5%AF%B9%E8%B1%A1objects%E5%92%8C%E5%8C%BA%E5%9D%97blocks\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>有向无环图(Dags, Direct Acyclic Graph)、对象(objects)和区块(blocks)</h2>\n<p>处理区块</p>\n<p><code class=\"gatsby-code-text\">ipfs add</code> 命令用来从你指定的文件的数据来创建Merkle DAG. 当执行该操作的时候，它遵循<a href=\"https://github.com/ipfs/go-ipfs/blob/master/unixfs/pb/unixfs.proto\">unixfs data format</a>. 这意味着你制定的文件会被切分放到区块里面，然后按照树状结构使用’link nodes’把区块绑定在一起。给定文件的哈希实际上是DAG的根结点的哈希。对于给定的DAG，你可以很容易使用<code class=\"gatsby-code-text\">ipfs ls</code>查看子区块。</p>\n<p>例子:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\"># 确保文件大于256k\nipfs add alargefile \nipfs ls thathash</code></pre>\n      </div>\n<p>上面的命令会打印如下信息:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">ipfs@earth ~&gt; ipfs ls qms2hjwx8qejwm4nmwu7ze6ndam2sfums3x6idwz5myzbn\nqmv8ndh7ageh9b24zngaextmuhj7aiuw3scc8hkczvjkww 7866189 \nqmuvjja4s4cgyqyppozttssquvgcv2n2v8mae3gnkrxmol 7866189 \nqmrgjmlhlddhvxuieveuuwkeci4ygx8z7ujunikzpfzjuk 7866189 \nqmrolalcquyo5vu5v8bvqmgjcpzow16wukq3s3vrll2tdk 7866189 \nqmwk51jygpchgwr3srdnmhyerheqd22qw3vvyamb3emhuw 5244129</code></pre>\n      </div>\n<p>它会显示给定文件的直接子区块信息，包含子区块的大小以及其子区块。</p>\n<h3 id=\"使用区块可以做点什么？\"><a href=\"#%E4%BD%BF%E7%94%A8%E5%8C%BA%E5%9D%97%E5%8F%AF%E4%BB%A5%E5%81%9A%E7%82%B9%E4%BB%80%E4%B9%88%EF%BC%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用区块可以做点什么？</h3>\n<p>如果你乐于发现尝试新事物的话，你可以从不同的区域获取到很多不同的信息。你可以使用子区块的哈希作为<code class=\"gatsby-code-text\">ipfs cat</code>的输入只能查看任意给定的子树的数据（该区块的数据和它的子区块的数据）。如果只需要查看给定区块的数据，不包括它的子节点，使用<code class=\"gatsby-code-text\">ipfs block get</code>. 但是需要注意的是，<code class=\"gatsby-code-text\">ipfs block get</code>会在你的屏幕上打印出直接区块的DAG的二进制的数据。</p>\n<p><code class=\"gatsby-code-text\">ipfs block stat</code> 获取指定区块的精确大小（不包含它的孩子结点），<code class=\"gatsby-code-text\">ipfs refs</code> 获取指定区块的所有孩子结点。 <code class=\"gatsby-code-text\">ipfs ls</code> or <code class=\"gatsby-code-text\">ipfs object links</code> 获取所有孩子结点和它们的大小。 如果你想要编写脚本运行在指定区块的孩子结点上，<code class=\"gatsby-code-text\">ipfs refs</code> 是更好的选择。</p>\n<h3 id=\"区块和对象的对比\"><a href=\"#%E5%8C%BA%E5%9D%97%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%AF%B9%E6%AF%94\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>区块和对象的对比</h3>\n<p>在IPFS, 区块是指由键值（哈希值）标识的单个数据单元。一个区块可以是任意类型的数据，不要求一定是某种特定的格式。而对象是指遵循Merkle DAG protobuf数据格式的区块。对象可以通过 <code class=\"gatsby-code-text\">ipfs object</code>解析和操作。任意给定的哈希值代表一个对象或区块。</p>\n<h3 id=\"从头开始创建区块\"><a href=\"#%E4%BB%8E%E5%A4%B4%E5%BC%80%E5%A7%8B%E5%88%9B%E5%BB%BA%E5%8C%BA%E5%9D%97\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>从头开始创建区块</h3>\n<p>创建自己的区块是很简单的。只要把数据放到一个文件里面，然后执行<code class=\"gatsby-code-text\">ipfs block put &lt;yourfile&gt;</code> . 或者通过管道把文件数据传进<code class=\"gatsby-code-text\">ipfs block put</code>, 像这样:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ echo &quot;This is some data&quot; | ipfs block put\nQmfQ5QAjvg4GtA3wg3adpnDJug8ktA1BxurVqBD8rtgVjM\n$ ipfs block get QmfQ5QAjvg4GtA3wg3adpnDJug8ktA1BxurVqBD8rtgVjM\nThis is some data</code></pre>\n      </div>\n<p>注意: 你不能使用<code class=\"gatsby-code-text\">ipfs cat</code>读取自己创建的区块。原因是自己创建的区块是非unixfs数据结构的原始数据. 请使用<code class=\"gatsby-code-text\">ipfs block get</code>读取原始区块。</p>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"集群be-the-swarm\"><a href=\"#%E9%9B%86%E7%BE%A4be-the-swarm\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>集群(Be the swarm)</h2>\n<p>IPFS里面充满了网络! 它里面包含了一组实用的命令可以帮助查看网络。</p>\n<p>查看你连接到了哪些对等结点:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-sh\"><code class=\"gatsby-code-sh\">ipfs swarm peers</code></pre>\n      </div>\n<p>手动连接到一个特定的对等结点. 如果对等结点不能工作，请从<code class=\"gatsby-code-text\">ipfs swarm peers</code>返回的列表里面选择一个。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-sh\"><code class=\"gatsby-code-sh\">ipfs swarm connect /ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z</code></pre>\n      </div>\n<p>查询网络上一个给定的对等结点:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-sh\"><code class=\"gatsby-code-sh\">ipfs dht findpeer QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z</code></pre>\n      </div>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"固定（pinning）\"><a href=\"#%E5%9B%BA%E5%AE%9A%EF%BC%88pinning%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>固定（Pinning）</h2>\n<p>固定（Pinning）在ipfs里面是一个很重要的概念。ipfs语义学试图让每一个对象看起来都像是在本地，没有诸如“从远端服务器获取文件, 无论实际上对象是在哪里，<code class=\"gatsby-code-text\">ipfs cat</code> or <code class=\"gatsby-code-text\">ipfs get</code>表现出一样的行为. 尽管这个理念很好, 但是有的时候你还是想要能够自己控制。固定（Pinning）允许你去告诉ipfs总是在本地保留给定的对象。ipfs有相当侵略性的缓存机制，那就是你在对象上执行任务ipfs操作，它会把对象在本地缓存一段时间。如果你想阻止垃圾回收，你可以固定你关心的对象。通过<code class=\"gatsby-code-text\">ipfs add</code>添加的对象默认会被递归的固定。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">echo &quot;ipfs rocks&quot; &gt; foo\nipfs add foo\nipfs pin ls --type=all\nipfs pin rm &lt;foo hash&gt;\nipfs pin rm -r &lt;foo hash&gt;\nipfs pin ls --type=all</code></pre>\n      </div>\n<p>正如你已经看到的，第一个<code class=\"gatsby-code-text\">ipfs pin rm</code>不能正常工作，它会提示给定的哈希被递归固定。在ipfs的世界里，有三种类型的固定；直接固定，固定单一的区块；递归固定，固定给定的区别以及它所有的孩子结点；间接固定，给定区块的父节点被递归固定。</p>\n<p>被固定的对象不会被垃圾回收。如果你不相信的话，可以尝试一下如下命令。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">ipfs add foo\nipfs repo gc\nipfs cat &lt;foo hash&gt;</code></pre>\n      </div>\n<p>但是如果foo不知道为何被取消了固定的话…</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">ipfs pin rm -r &lt;foo hash&gt;\nipfs repo gc\nipfs cat &lt;foo hash&gt;</code></pre>\n      </div>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"启动自己的ipfs服务\"><a href=\"#%E5%90%AF%E5%8A%A8%E8%87%AA%E5%B7%B1%E7%9A%84ipfs%E6%9C%8D%E5%8A%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启动自己的ipfs服务</h2>\n<p>启动ipfs的时候，默认有一些服务会运行，比如dht、bitswap和诊断服务。这些简单的服务都会在对等结点的宿主机上注册一个处理器，监听接受新的连接。<code class=\"gatsby-code-text\">corenet</code>包有针对这个功能有一个干净的接口。那让我们试图创建一个简单的演示服务来试用一下。</p>\n<p>让我们从创建宿主服务开始:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">package main\n\nimport (\n        &quot;fmt&quot;\n\n        core &quot;github.com/ipfs/go-ipfs/core&quot;\n        corenet &quot;github.com/ipfs/go-ipfs/core/corenet&quot;\n        fsrepo &quot;github.com/ipfs/go-ipfs/repo/fsrepo&quot;\n\n        &quot;code.google.com/p/go.net/context&quot;\n)</code></pre>\n      </div>\n<p>这里我们不需要倒入太多的包。\n现在，我们唯一要做的其他事情就是我们的主函数：</p>\n<p>安装一个ipfs结点.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">func main() {\n        // Basic ipfsnode setup\n        r, err := fsrepo.Open(&quot;~/.ipfs&quot;)\n        if err != nil {\n                panic(err)\n        }\n\n        ctx, cancel := context.WithCancel(context.Background())\n        defer cancel()\n\n        cfg := &amp;core.BuildCfg{\n                Repo:   r,\n                Online: true,\n        }\n\n        nd, err := core.NewNode(ctx, cfg)\n\n        if err != nil {\n                panic(err)\n        }</code></pre>\n      </div>\n<p>上面只是从在用户目录<code class=\"gatsby-code-text\">~/.ipfs</code>的配置来初始化默认的ipfs结点的简单的模板。</p>\n<p>下一步，我们将要创建我们的服务。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">        list, err := corenet.Listen(nd, &quot;/app/whyrusleeping&quot;)\n        if err != nil {\n                panic(err)\n        }\n\n        fmt.Printf(&quot;I am peer: %s\\n&quot;, nd.Identity.Pretty())\n\n        for {\n                con, err := list.Accept()\n                if err != nil {\n                        fmt.Println(err)\n                        return\n                }\n\n                defer con.Close()\n\n                fmt.Fprintln(con, &quot;Hello! This is whyrusleepings awesome ipfs service&quot;)\n                fmt.Printf(&quot;Connection from: %s\\n&quot;, con.Conn().RemotePeer())\n        }\n}</code></pre>\n      </div>\n<p>上面是你基于ipfs写一个服务所需要的全部。当对等结点连接进来，我们发送给它们问候，在日志里面打印它们的ID，最后关闭会话。这是最简单的服务，并且你可以扩展更多去处理进来的连接。</p>\n<p>现在我们需要一个对等结点来连接我们：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">package main\n\nimport (\n        &quot;fmt&quot;\n        &quot;io&quot;\n        &quot;os&quot;\n\n        core &quot;github.com/ipfs/go-ipfs/core&quot;\n        corenet &quot;github.com/ipfs/go-ipfs/core/corenet&quot;\n        peer &quot;github.com/ipfs/go-ipfs/p2p/peer&quot;\n        fsrepo &quot;github.com/ipfs/go-ipfs/repo/fsrepo&quot;\n\n        &quot;golang.org/x/net/context&quot;\n)\n\nfunc main() {\n        if len(os.Args) &lt; 2 {\n                fmt.Println(&quot;Please give a peer ID as an argument&quot;)\n                return\n        }\n        target, err := peer.IDB58Decode(os.Args[1])\n        if err != nil {\n                panic(err)\n        }\n\n        // Basic ipfsnode setup\n        r, err := fsrepo.Open(&quot;~/.ipfs&quot;)\n        if err != nil {\n                panic(err)\n        }\n\n        ctx, cancel := context.WithCancel(context.Background())\n        defer cancel()\n\n        cfg := &amp;core.BuildCfg{\n                Repo:   r,\n                Online: true,\n        }\n\n        nd, err := core.NewNode(ctx, cfg)\n\n        if err != nil {\n                panic(err)\n        }\n\n        fmt.Printf(&quot;I am peer %s dialing %s\\n&quot;, nd.Identity, target)\n\n        con, err := corenet.Dial(nd, target, &quot;/app/whyrusleeping&quot;)\n        if err != nil {\n                fmt.Println(err)\n                return\n        }\n\n        io.Copy(os.Stdout, con)\n}</code></pre>\n      </div>\n<p>这个对等结点将会建立它的ipfs结点（注意：这有点耗费系统资源，正常情况你不会为单独的链接分配一个实例），并且连接刚创建的服务。</p>\n<p>执行下面的命令去尝试一下：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs init # if you havent already\n$ go run host.go</code></pre>\n      </div>\n<p>上面应该会打印出对等结点的ID，拷贝并且在第二台计算机上使用</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs init # if you havent already\n$ go run client.go &lt;peerID&gt;</code></pre>\n      </div>\n<p>它应该会打印出<code class=\"gatsby-code-text\">Hello! This is whyrusleepings awesome ipfs service</code></p>\n<p>现在，你可能会有疑问：“我为什么要这么用？它比<code class=\"gatsby-code-text\">net</code>包会更好吗？”。好的，这里是一些好处。</p>\n<ol>\n<li>你在连接一个特定的对等结点ID，不用关心对等结点的IP是否发生了变化。</li>\n<li>你利用了内建在我们net包里面的NAT穿越</li>\n<li>和端口相比，你获取到更有意义的协议ID字串。</li>\n</ol>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"简单的ipfs快照\"><a href=\"#%E7%AE%80%E5%8D%95%E7%9A%84ipfs%E5%BF%AB%E7%85%A7\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>简单的ipfs快照</h2>\n<p>让我们快速浏览一下如何对ipfs进行基本的快照。</p>\n<p>保存你的目录：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs add -r ~/code/myproject</code></pre>\n      </div>\n<p>记录哈希：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ echo $hash `date` &gt;&gt; snapshots</code></pre>\n      </div>\n<p>或者一次性的：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ echo `ipfs add -q -r ~/code/myproject | tail -n1` `date` &gt;&gt; snapshots</code></pre>\n      </div>\n<p>(注意: <code class=\"gatsby-code-text\">-q</code> 只会输出哈希, 通过管道传给<code class=\"gatsby-code-text\">tail -n1</code>来确保只输出顶级文件夹的哈希.)</p>\n<p>确保针对挂载点有合适的用户权限（拥有者）：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ sudo mkdir /ipfs /ipns\n$ sudo chown `whoami` /ipfs /ipns</code></pre>\n      </div>\n<p>为了能够从ifps <code class=\"gatsby-code-text\">mount</code>目录，你需要安装<code class=\"gatsby-code-text\">Fuse</code>。你可以从<a href=\"https://github.com/ipfs/go-ipfs/blob/master/docs/fuse.md\">install <code class=\"gatsby-code-text\">Fuse</code> in the <code class=\"gatsby-code-text\">go-ipfs</code> docs</a>查看如何安装。</p>\n<p>查看活跃的快照：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs mount\n$ ls /ipfs/$hash/\n\n# can also\n\n$ cd /ipfs/$hash/\n$ ls</code></pre>\n      </div>\n<p>通过fuse接口，你能够访问你当时创建快照的文件。</p>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"星际命名系统\"><a href=\"#%E6%98%9F%E9%99%85%E5%91%BD%E5%90%8D%E7%B3%BB%E7%BB%9F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>星际命名系统</h2>\n<p>星际命名系统是一种增加少量的可变性到永久不变的ipfs的一种方式。它允许你存在在你的对等结点ID（你的公钥的哈希）的命名空间下面ipfs哈希的索引。建立它的方式非常简单。</p>\n<p>首先，你有一些内容需要发布：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ echo &#39;Let us have some mutable fun!&#39; | ipfs add</code></pre>\n      </div>\n<p>记下上面打印出来的哈希，在这里用它来发布内容到网络：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs name publish &lt;that hash&gt;\nPublished to &lt;your peer ID&gt;: &lt;that hash&gt;</code></pre>\n      </div>\n<p>现在，测试一下是否正常工作，你可以尝试一些不同的东西：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs name resolve &lt;your peer ID&gt;\n&lt;that hash&gt;</code></pre>\n      </div>\n<p>如果你在同一台机器上执行上面的命令，它应该会马上返回，因为你已经在本地缓存了入口信息；我们在其他运行ipfs的机器上试一下。</p>\n<p>另一种尝试的方式就是在网关上面：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">https://ipfs.io/ipns/&lt;your peer ID&gt;</code></pre>\n      </div>\n<p>下面是有趣的一部分，我们来改变内容：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ echo &#39;Look! Things have changed!&#39; | ipfs add</code></pre>\n      </div>\n<p>下一步，我们拿到上一步里面的哈希…</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ ipfs name publish &lt;the new hash&gt;\nPublished to &lt;your peer ID&gt;: &lt;the new hash&gt;</code></pre>\n      </div>\n<p>看！现在，如果你重新访问刚刚那个入口，你讲看到新的对象。</p>\n<p>恭喜！你刚刚成功的发布了内容，并且看了成功看到发布的内容！注意更新ipns入口可能会“破坏连结”因为索引到ipns入口的东西可以不再指向它所期望的内容。没有方式可以解决它，因此如果你想要确保永久性，要小心的使用ipns连结。将来，我们可能ipns入口像git commit链那样，这样的话，每一个新的入口都会有它的历史回溯。</p>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"修改bootstrap-peers列表\"><a href=\"#%E4%BF%AE%E6%94%B9bootstrap-peers%E5%88%97%E8%A1%A8\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>修改bootstrap peers列表</h2>\n<p>IPFS自举列表是一组可以获知网络上其他对等结点的对等结点。IPFS给出了默认的一组可以信任的对等结点，但是你可以自由的修改这个列表来满足你的要求。一个重要的用途就是你可以创建一个个人IPFS网络。</p>\n<p>首先，我们列出自举列表：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap list\n/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ\n/ip4/104.236.151.122/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx\n/ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z\n/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLpPVmHKQ4XTPdz8tjDFgdeRFkpV8JgYq8JVJ69RrZm\n/ip4/104.236.76.40/tcp/4001/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64\n/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu\n/ip4/162.243.248.213/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm\n/ip4/178.62.158.247/tcp/4001/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd\n/ip4/178.62.61.185/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3</code></pre>\n      </div>\n<p>上面列出来的是默认的IPFS自举列表，它们是有IPFS开发团队建立。这些地址是完全可以解析，并且使用<a href=\"https://github.com/jbenet/multiaddr\">multiaddr</a>格式表示。通过这种方式，你的结点很清楚的知道怎么访问这些自举结点，这些位置信息是没有歧义的。</p>\n<p>不要修改这些列表除非你理解它其中的含义。自举在分布式系统中是一个很重要的安全隐患：恶意的自举结点只能引导你到其他恶意的结点。因此推荐使用IPFS开发团队提供的默认自举列表，另外一种情况就是如果你要建立自己的私有网络，使用你可以控制的一组自举列表。不要添加你不信任的结点。</p>\n<p>这里我们增加一个新的结点到自举列表：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap add /ip4/25.196.147.100/tcp/4001/ipfs/QmaMqSwWShsPg2RbredZtoneFjXhim7AQkqbLxib45Lx4S</code></pre>\n      </div>\n<p>这里我们从自举列表移除一个结点：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap rm /ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu</code></pre>\n      </div>\n<p>如果我们想要创建一份我们自举列表的备份。我们可以通过保存<code class=\"gatsby-code-text\">ipfs bootstrap list</code>到输出到一个文件里面。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap list &gt;save</code></pre>\n      </div>\n<p>如果我们想要重新开始，我们可以一次性的删除整个自举列表：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap rm --all</code></pre>\n      </div>\n<p>在一个空的自举列表的情况下，我们可以恢复默认的自举列表：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap add --default</code></pre>\n      </div>\n<p>再次移除整个自举列表，我们把我们保存的自举列表通过管道定向到<code class=\"gatsby-code-text\">ipfs bootstrap add</code>来回复我们之前保存的自举列表：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; ipfs bootstrap rm --all\n&gt; cat save | ipfs bootstrap add</code></pre>\n      </div>\n<p>By <a href=\"http://github.com/jbenet\">jbenet</a> and <a href=\"http://github.com/insanity54\">insanity54</a></p>\n<hr>\n<h2 id=\"配置自己的节点\"><a href=\"#%E9%85%8D%E7%BD%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E8%8A%82%E7%82%B9\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>配置自己的节点</h2>\n<p>通过保存在<code class=\"gatsby-code-text\">~/.ipfs/config</code>的json格式的文件来配置ipfs。</p>\n<h3 id=\"地址\"><a href=\"#%E5%9C%B0%E5%9D%80\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>地址</h3>\n<p>地址文件保存了不同的地址类型，它们都是使用多地址的地址格式。让我们来看下每种地址类型代表什么意思。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&quot;Addresses&quot;: {\n    &quot;Swarm&quot;: [\n      &quot;/ip4/0.0.0.0/tcp/4001&quot;\n    ],\n    &quot;API&quot;: &quot;/ip4/127.0.0.1/tcp/5001&quot;,\n    &quot;Gateway&quot;: &quot;/ip4/127.0.0.1/tcp/8080&quot;\n  }</code></pre>\n      </div>\n<h4 id=\"集群（swarm）\"><a href=\"#%E9%9B%86%E7%BE%A4%EF%BC%88swarm%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>集群（Swarm）</h4>\n<p>集群地址是本地的守护进程为接受其他ipfs对等结点的连接而侦听的地址。你应该尝试确保这些地址可以被其他的计算机访问，没有防火墙拦截你指定的端口。</p>\n<h4 id=\"api\"><a href=\"#api\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API</h4>\n<p>API地址是本地的守护进程提供HTTP API而侦听的地址。该API用来控制命令行的守护进程，如果你敢于挑战的话，可以使用curl来访问。你应该确保这个地址不能被外部的机器访问，否则其他潜在的恶意组织可能会发送命令到你的ipfs守护进程。</p>\n<h4 id=\"网关（gateway）\"><a href=\"#%E7%BD%91%E5%85%B3%EF%BC%88gateway%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>网关（Gateway）</h4>\n<p>网关地址是本地守护进程提供网关接口而侦听的地址。该网管用来通过ipfs查看文件，服务静态网站内容。至于该地址是否可以被外部的地址访问，决定权在于你。该地址是可选的，如果为空的话，网关服务器将不会启动。</p>\n<h3 id=\"mounts\"><a href=\"#mounts\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mounts</h3>\n<p>如果<code class=\"gatsby-code-text\">ipfs mount</code>没有指定mount目录，mounts配置为ipfs和ipns虚拟文件系统指定的默认的mountpoints。这些文件夹应该存在，并且你的用户有权限通过fuse mount到这些目录。</p>\n<h3 id=\"自举（bootstrap）\"><a href=\"#%E8%87%AA%E4%B8%BE%EF%BC%88bootstrap%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自举（Bootstrap）</h3>\n<p>自举配置组指定了一组守护进程在启动的时候会连接的ipfs对等结点。默认的值是’ipfs solarnet’结点，它是部署在不同的国家的VPS servers.</p>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"增加和播放视频\"><a href=\"#%E5%A2%9E%E5%8A%A0%E5%92%8C%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>增加和播放视频</h2>\n<p>ipfs可以被用来存储和播放视频。假设我们增加了一个视频：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">ipfs add -q sintel.mp4 | tail -n1</code></pre>\n      </div>\n<p>拿到上面的哈希，你可以通过不同的方式查看：</p>\n<p>通过命令行：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">ipfs cat $vidhash | mplayer -vo xv -</code></pre>\n      </div>\n<p>通过本地网关：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">mplayer http://localhost:8080/ipfs/$vidhash\n\n# 通过浏览器打开\n\nchromium http://localhost:8080/ipfs/$vidhash</code></pre>\n      </div>\n<p>(注意: 该网关访问方式可以工作与大部分视频播放器和浏览器。)</p>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"通过图像展示对象\"><a href=\"#%E9%80%9A%E8%BF%87%E5%9B%BE%E5%83%8F%E5%B1%95%E7%A4%BA%E5%AF%B9%E8%B1%A1\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>通过图像展示对象</h2>\n<h3 id=\"可视对象（graphing-objects）\"><a href=\"#%E5%8F%AF%E8%A7%86%E5%AF%B9%E8%B1%A1%EF%BC%88graphing-objects%EF%BC%89\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>可视对象（Graphing Objects）</h3>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-7347f.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 840px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 11.664392905866302%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAWklEQVQI1z2MSQ7AIAwD+f9HkdhXkYubJlHLYWSHQXZjDMw58WfvHSEExBiRUrJsreGcAyLC3vt2/a+stSzVOZEs8qJ3rdWQcZYxlmEupdhbztm64r2//fPPC2zImMnAY6QaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ipfs examples graph\"\n        title=\"\"\n        src=\"/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-acf85.png\"\n        srcset=\"/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-c1418.png 210w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-5d5d8.png 420w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-acf85.png 840w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-de0cd.png 1260w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-7347f.png 1466w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>当我们使用ipfs存储文件或者写更复杂的数据结构的时候，可视化被创建的merkledag是非常有用的。为此，我写了一个简单的工具<code class=\"gatsby-code-text\">graphmd</code> (graph merkle dag)。</p>\n<p><code class=\"gatsby-code-text\">graphmd</code>是一个很短的shell脚本(<a href=\"./graphmd\">source</a>)。它使用<code class=\"gatsby-code-text\">ipfs refs —format</code>产生<code class=\"gatsby-code-text\">dot</code>输出。</p>\n<h3 id=\"安装graphmd\"><a href=\"#%E5%AE%89%E8%A3%85graphmd\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装graphmd</h3>\n<p><code class=\"gatsby-code-text\">graphmd</code>很快将会有它自己的仓库，但是现在可以这么安装：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">ipfs cat Qmcd7Sebd46vxDWjbUERK8w82zp8sgWTtHT5c93kzr2v3M  &gt;/usr/local/bin/graphmd\nchmod +x /usr/local/bin/graphmd</code></pre>\n      </div>\n<h3 id=\"graphmd用法\"><a href=\"#graphmd%E7%94%A8%E6%B3%95\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>graphmd用法</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&gt; graphmd\nusage: graphmd &lt;ipfs-path&gt;...\noutput merkledag links in graphviz dot\n\nuse it with dot:\n  bin/graphmd QmZPAMWUfLD95GsdorXt9hH7aVrarb2SuLDMVVe6gABYmx | dot -Tsvg\n  bin/graphmd QmZPAMWUfLD95GsdorXt9hH7aVrarb2SuLDMVVe6gABYmx | dot -Tpng\n  bin/graphmd QmZPAMWUfLD95GsdorXt9hH7aVrarb2SuLDMVVe6gABYmx | dot -Tpdf</code></pre>\n      </div>\n<h3 id=\"例子\"><a href=\"#%E4%BE%8B%E5%AD%90\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>例子</h3>\n<p>给定<a href=\"https://ipfs.io/ipfs/QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF\">demo</a> 这个目录:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-sh\"><code class=\"gatsby-code-sh\">&gt; tree demo\ndemo\n├── cat.jpg\n└── test\n    ├── bar\n    ├── baz\n    │   ├── b\n    │   └── f\n    └── foo\n\n2 directories, 5 files</code></pre>\n      </div>\n<p>添加文件到ipfs</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-sh\"><code class=\"gatsby-code-sh\">&gt; ipfs add -r demo\nadded QmajFHHivh25Qb2cNbnnnEeUe1gDLHX9ta7hs2XKX1vazb demo/cat.jpg\nadded QmTz3oc4gdpRMKP2sdGUPZTAGRngqjsi99BPoztyP53JMM demo/test/bar\nadded QmTz3oc4gdpRMKP2sdGUPZTAGRngqjsi99BPoztyP53JMM demo/test/baz/b\nadded QmYNmQKp6SuaVrpgWRsPTgCQCnpxUYGq76YEKBXuj2N4H6 demo/test/baz/f\nadded QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt demo/test/baz\nadded QmYNmQKp6SuaVrpgWRsPTgCQCnpxUYGq76YEKBXuj2N4H6 demo/test/foo\nadded QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv demo/test\nadded QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF demo</code></pre>\n      </div>\n<p>用<code class=\"gatsby-code-text\">graphmd</code>去生成<code class=\"gatsby-code-text\">dot</code>输出</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-sh\"><code class=\"gatsby-code-sh\">&gt; graphmd QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF &gt;graph.dot\ndigraph {\n  graph [rankdir=LR];\n  QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF [fontsize=8 shape=box];\n  QmajFHHivh25Qb2cNbnnnEeUe1gDLHX9ta7hs2XKX1vazb [fontsize=8 shape=box];\n  QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF -&gt; QmajFHHivh25Qb2cNbnnnEeUe1gDLHX9ta7hs2XKX1vazb [label=&quot;cat.jpg&quot;];\n  QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF [fontsize=8 shape=box];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv [fontsize=8 shape=box];\n  QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF -&gt; QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv [label=&quot;test&quot;];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv [fontsize=8 shape=box];\n  QmTz3oc4gdpRMKP2sdGUPZTAGRngqjsi99BPoztyP53JMM [fontsize=8 shape=box];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv -&gt; QmTz3oc4gdpRMKP2sdGUPZTAGRngqjsi99BPoztyP53JMM [label=&quot;bar&quot;];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv [fontsize=8 shape=box];\n  QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt [fontsize=8 shape=box];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv -&gt; QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt [label=&quot;baz&quot;];\n  QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt [fontsize=8 shape=box];\n  QmTz3oc4gdpRMKP2sdGUPZTAGRngqjsi99BPoztyP53JMM [fontsize=8 shape=box];\n  QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt -&gt; QmTz3oc4gdpRMKP2sdGUPZTAGRngqjsi99BPoztyP53JMM [label=&quot;b&quot;];\n  QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt [fontsize=8 shape=box];\n  QmYNmQKp6SuaVrpgWRsPTgCQCnpxUYGq76YEKBXuj2N4H6 [fontsize=8 shape=box];\n  QmX1ebVUtfY11ZCpVmqyE5mDoN62SpLd8eLPpg5GGV1ABt -&gt; QmYNmQKp6SuaVrpgWRsPTgCQCnpxUYGq76YEKBXuj2N4H6 [label=&quot;f&quot;];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv [fontsize=8 shape=box];\n  QmYNmQKp6SuaVrpgWRsPTgCQCnpxUYGq76YEKBXuj2N4H6 [fontsize=8 shape=box];\n  QmNtpA5TBNqHrKf3cLQ1AiUKXiE4JmUodbG5gXrajg8wdv -&gt; QmYNmQKp6SuaVrpgWRsPTgCQCnpxUYGq76YEKBXuj2N4H6 [label=&quot;foo&quot;];\n}</code></pre>\n      </div>\n<p>通过管道定向到 <code class=\"gatsby-code-text\">dot</code>产生<code class=\"gatsby-code-text\">svg</code>, <code class=\"gatsby-code-text\">pdf</code>, <code class=\"gatsby-code-text\">png</code> or <a href=\"http://www.graphviz.org/Documentation/dotguide.pdf\">whatever</a></p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">graphmd QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF | dot -Tsvg &gt;output/graph.svg\ngraphmd QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF | dot -Tpdf &gt;output/graph.pdf\ngraphmd QmRCJXG7HSmprrYwDrK1GctXHgbV7EYpVcJPQPwevoQuqF | dot -Tpng &gt;output/graph.png</code></pre>\n      </div>\n<p>Et voilà: <a href=\"https://ipfs.io/ipfs/QmbefthRKDReojALJi8nGPwvUVPqe1aXdoD9ysX44aUfvG/graph.svg\">svg</a>, <a href=\"/ipfs/QmbefthRKDReojALJi8nGPwvUVPqe1aXdoD9ysX44aUfvG/graph.pdf\">pdf</a>, <a href=\"https://ipfs.io/ipfs/QmbefthRKDReojALJi8nGPwvUVPqe1aXdoD9ysX44aUfvG/graph.png\">png</a></p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-7347f.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 840px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 11.664392905866302%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAWklEQVQI1z2MSQ7AIAwD+f9HkdhXkYubJlHLYWSHQXZjDMw58WfvHSEExBiRUrJsreGcAyLC3vt2/a+stSzVOZEs8qJ3rdWQcZYxlmEupdhbztm64r2//fPPC2zImMnAY6QaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ipfs examples graph\"\n        title=\"\"\n        src=\"/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-acf85.png\"\n        srcset=\"/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-c1418.png 210w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-5d5d8.png 420w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-acf85.png 840w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-de0cd.png 1260w,\n/static/ipfs-examples-graph-c14b2dd13a42d1092cfe5389f025ee20-7347f.png 1466w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id=\"文件块\"><a href=\"#%E6%96%87%E4%BB%B6%E5%9D%97\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>文件块</h3>\n<p><code class=\"gatsby-code-text\">graphmd</code>检查文件块算法是特别有用的。例如，这里是包含默认的半平衡间接的区块主干的<code class=\"gatsby-code-text\">ipfs</code> binary看起来的样子。</p>\n<ul>\n<li><a href=\"https://ipfs.io/ipfs/QmQ8yWC1SGn73P1SPSw8iqSBGEscve1N6sQpzd1xzD5EV1/graph.dot\">dot output</a></li>\n<li><a href=\"https://ipfs.io/ipfs/QmQ8yWC1SGn73P1SPSw8iqSBGEscve1N6sQpzd1xzD5EV1/graph.svg\">svg render</a></li>\n<li><a href=\"https://ipfs.io/ipfs/QmQ8yWC1SGn73P1SPSw8iqSBGEscve1N6sQpzd1xzD5EV1/graph.pdf\">pdf render</a></li>\n</ul>\n<p><img src=\"/ipfs-examples-graph-e22c3dd20af130bbadefb434b9aabf61.svg\"></p>\n<p>by <a href=\"https://github.com/jbenet\">Juan Benet</a></p>\n<hr>\n<h2 id=\"让git更加分布式\"><a href=\"#%E8%AE%A9git%E6%9B%B4%E5%8A%A0%E5%88%86%E5%B8%83%E5%BC%8F\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>让Git更加分布式</h2>\n<p>你是否曾经对自己说过：“哥们，我的git服务器不够分布式”或“我希望有更简单的方式可以在全世界范围内服务一个静态的git仓库”。现在不在是想象了，下面就是我们的方案。</p>\n<p>在这篇文章，我讲讨论如何通过ipfs网络服务git仓库。最终会有个通过ipfs服务的url可以使用<code class=\"gatsby-code-text\">git clone</code>去克隆仓库。</p>\n<p>一开始，我们选择一个你想要托管的git仓库，做一个裸克隆。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ git clone --bare git@myhost.io/myrepo</code></pre>\n      </div>\n<p>对于不熟悉git的人，裸仓库意味着它不是一个工作树，可以被用做一个服务器。它们和正常的git仓库有一些微小的差别的。</p>\n<p>现在，为了让它可以被克隆，需要执行下面命令：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ cd myrepo\n$ git update-server-info</code></pre>\n      </div>\n<p>另外，以可以解包所有的gits对象：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ cp objects/pack/*.pack .\n$ git unpack-objects &lt; ./*.pack\n$ rm ./*.pack</code></pre>\n      </div>\n<p>如果你添加git仓库的多个版本，把git大的包文件分解成单独的对象可以允许ipfs去掉重复的对象。</p>\n<p>一旦你做完了上面的操作，这个仓库就可以准备开始服务了。剩下的你需要做的就是把它添加到ipfs：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ pwd\n/code/myrepo\n$ ipfs add -r .\n...\n...\n...\nadded QmX679gmfyaRkKMvPA4WGNWXj9PtpvKWGPgtXaF18etC95 .</code></pre>\n      </div>\n<p>现在，可以尝试克隆它了。</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">$ cd /tmp\n$ git clone http://localhost:8080/ipfs/QmX679gmfyaRkKMvPA4WGNWXj9PtpvKWGPgtXaF18etC95 myrepo</code></pre>\n      </div>\n<p>注意: 确保使用你自己的哈希。</p>\n<p>现在，你可能想问“好的，我不能做任何修改的git仓库有啥好的呢？”那让我来告诉你一个很好的用例。我想要使用GO进行编程，对于那些不知道go的朋友，使用版本控制来导入一些库</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"github.com/whyrusleeping/mycoollibrary\"</span>\n<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>这是一个很棒的特性，解决了很多问题，但是经常，当我使用某人的库的时候，我会遇到一些问题，因为他们改变了API，而这破坏了我的代码。现在使用上面我们说的方法，你可以克隆那个库，把它加到ipfs，你的导入路径看起来像这样：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-go\"><code class=\"gatsby-code-go\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n        mylib <span class=\"token string\">\"gateway.ipfs.io/ipfs/QmX679gmfyaRkKMvPA4WGNWXj9PtpvKWGPgtXaF18etC95\"</span>\n<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>现在你可以确保每次都会有相同的代码。</p>\n<p>注意: 因为go不允许使用localhost作为导入路径，因此我们使用公共http网关。这种方式安全性得不到保障，因为中间人攻击可能会修改你的代码。你可以使用域名重定向到localhost来规避这个问题。</p>\n<p>By <a href=\"http://github.com/whyrusleeping\">whyrusleeping</a></p>\n<hr>\n<h2 id=\"使用ipfs托管网站\"><a href=\"#%E4%BD%BF%E7%94%A8ipfs%E6%89%98%E7%AE%A1%E7%BD%91%E7%AB%99\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用IPFS托管网站</h2>\n<p>简短的介绍如何通过ipfs托管网站</p>\n<p>添加你的静态网站到ipfs是很简单的。开启守护进程。\nAdding your static website to ipfs is quite simple! Simply turn on your daemon:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code class=\"gatsby-code-bash\">$ ipfs daemon</code></pre>\n      </div>\n<p>然后添加包含网站的目录</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code class=\"gatsby-code-bash\">$ <span class=\"token function\">ls</span> mysite\nimg index.html\n$ ipfs add -r mysite\nadded QmcMN2wqoun88SVF5own7D5LUpnHwDA6ALZnVdFXhnYhAs mysite/img/spacecat.jpg\nadded QmS8tC5NJqajBB5qFhcA1auav14iHMnoMZJWfmr4k3EY6w mysite/img\nadded QmYh6HbZhHABQXrkQZ4aRRSoSa6bb9vaKoHeumWex6HRsT mysite/index.html\nadded QmYeAiiK1UfB8MGLRefok1N7vBTyX8hGPuMXZ4Xq1DPyt7 mysite/</code></pre>\n      </div>\n<p>最后一个紧跟着文件夹名字的哈希是你所需要的。从现在开始我们就称它为<code class=\"gatsby-code-text\">$SITE_HASH</code>。</p>\n<p>现在，你可以在浏览器中打开<code class=\"gatsby-code-text\">http://localhost:8080/ipfs/$SITE_HASH</code>。然后，你可以通过另外一个ipfs结点打开<code class=\"gatsby-code-text\">http://localhost:8080/ipfs/$SITE_HASH</code>来查看。很酷吧？但是使用哈希看起来很丑陋。我们用一些方法去掉哈希值。</p>\n<p>首先，你可以做一个简单的DNS TXT记录，包含<code class=\"gatsby-code-text\">dnslink=/ipfs/$SITE_HASH</code>.一旦记录被广播出去，你就是可以通过打开<code class=\"gatsby-code-text\">http://localhost:8080/ipns/your.domain</code>来查看网站。现在看起来就舒服多了。你还可以通过打开 <code class=\"gatsby-code-text\">http://gateway.ipfs.io/ipns/your.domain</code>来访问。</p>\n<p>下面，你可能要问“如果我想改变我的网站呢，DNS太慢了。”好的，我来给你介绍一下lpns. Lpns是星际命名系统，你可能已经注意到上面的链接包含<code class=\"gatsby-code-text\">/ipns/</code>而不是<code class=\"gatsby-code-text\">/ipfs/</code>。Ipns用于在ipfs网络中可变的内容，它相对而言很容易使用，也允许你在不更新dns的情况下改变你的网站。那怎么去用呢？</p>\n<p>在添加网站页面之后，做下面操作：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"gatsby-code-bash\"><code class=\"gatsby-code-bash\">$ ipfs name publish <span class=\"token variable\">$SITE_HASH</span>\nPublished to <span class=\"token operator\">&lt;</span>your peer id<span class=\"token operator\">></span>: /ipfs/<span class=\"token variable\">$SITE_HASH</span></code></pre>\n      </div>\n<p>（免责声明：当使用IPNS去更新网站的时候，有个事情要去考虑，那就是当更新你的网站的时候，资产可能是从两个不同的哈希加载而来，这个可能会导致过期或丢失的资产，除非不考虑它。）</p>\n<p>现在，你可以通过打开 <code class=\"gatsby-code-text\">http://localhost:8080/ipns/&lt;your peer id&gt;</code>来测试看下能否正常工作。也可能使用在公共网关上的相同的链接。一旦你做好了这些工作，我们来隐藏哈希。修改你的DNS TXT记录，包含<code class=\"gatsby-code-text\">dnslink=/ipns/&lt;your peer id&gt;</code>，等到记录广播完成之后，然后尝试访问<code class=\"gatsby-code-text\">http://localhost:8080/ipns/your.domain</code>.</p>\n<p>这时，你在ipfs/ipns有了一个网站。你可能想知道你怎么暴露这个网站到<code class=\"gatsby-code-text\">http://your.domain</code>, 这样网络上的用户不需要知道任何细节就可以访问。这个也是很容易去做的，你所需要做的就是创建TXT记录，然后把<code class=\"gatsby-code-text\">your.domain</code>的A记录只想侦听在端口80的ipfs守护进行的地址（比如<code class=\"gatsby-code-text\">gateway.ipfs.io</code>）。浏览器会在请求头里面发送<code class=\"gatsby-code-text\">your.domain</code>，由于前面你增加了你的dnslink TXT记录，这样ipfs网关会识别 <code class=\"gatsby-code-text\">your.domain</code>为ipns名字，那么它将会服务 <code class=\"gatsby-code-text\">/ipns/your.domain/</code>而不是<code class=\"gatsby-code-text\">/</code>。</p>\n<p>那么，如果你把<code class=\"gatsby-code-text\">your.domain</code>的A记录指向<code class=\"gatsby-code-text\">gateway.ipfs.io</code>地址，然后等待DNS广播完成，那么任何人不需要额外的配置都可以通过<code class=\"gatsby-code-text\">http://your.domain</code>来访问托管在ipfs上的网站。</p>\n<p>另外，也可以用CNAME记录指向网关的DNS记录。通过这种方式，网关的IP地址会自动更新。然而CNAME记录不允许用于其他记录，例如表示ipfs/ipns记录的TXT。 因为这个，ipfs允许为<code class=\"gatsby-code-text\">_dnslink.your.domain</code> 创建DNS TXT记录<code class=\"gatsby-code-text\">dnslink=/ipns/&lt;yourpeer id&gt;</code>。</p>\n<p>因此通过为<code class=\"gatsby-code-text\">your.domain</code>创建CNAME指向<code class=\"gatsby-code-text\">gateway.ipfs.io</code>，然后用<code class=\"gatsby-code-text\">dnslink=/ipns/&lt;your peer id&gt;</code> 增加_dnslink.your.domain记录，那么你就可以不需要显示的使用ipfs网关的地址托管你的网站。</p>\n<p>Happy Hacking!</p>\n<p>By\n<a href=\"https://github.com/whyrusleeping\">Whyrusleeping</a></p>\n<hr>\n<blockquote>\n<p>以上部分链接需要翻墙才能打开</p>\n</blockquote>\n<p>Tip打赏</p>\n<p>翻译 <a href=\"https://www.binstd.com/u/zhangwenhu\">Zhang Wenhu</a></p>\n<p>ETH: <code class=\"gatsby-code-text\">0x81b651110BeCf022526F2D7d822761A0A1ef4289</code></p>\n<p>校对 <a href=\"https://www.binstd.com/u/zian\">zian</a></p>\n<p>ETH: <code class=\"gatsby-code-text\">0xAf1c0a63Ade4b56e262849235e49D87742C56af4</code></p>\n<p>站长 <a href=\"https://www.binstd.com/u/cho\">cho</a></p>\n<ol>\n<li>BTC: <code class=\"gatsby-code-text\">1Af2Q23Y1kqgtgbryzjS7RxrnEmyvYuX4b</code></li>\n<li>ETH: <code class=\"gatsby-code-text\">0x6bcCfb7265d4aB0C1a71F7d19b9E581cae73D777</code></li>\n</ol>","frontmatter":{"title":"IPFS例子","next":null,"prev":null},"fields":{"path":null,"slug":"docs/examples.html"}}},"pathContext":{"slug":"docs/examples.html"}}